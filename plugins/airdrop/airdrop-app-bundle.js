!function(){"use strict";function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,r){return(o=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function i(e,r){return!r||"object"!=typeof r&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}function a(e,r,t){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,r,t){var n=function(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&null!==(e=s(e)););return e}(e,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(t):o.value}})(e,r,t||e)}var I={K:[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],digest:function(e){var r=1779033703,t=3144134277,n=1013904242,o=2773480762,s=1359893119,i=2600822924,a=528734635,c=1541459225,u=I.K;if("string"==typeof e){var l=unescape(encodeURIComponent(e));e=new Uint8Array(l.length);for(var f=0;f<l.length;f++)e[f]=255&l.charCodeAt(f)}var p=e.length,h=64*Math.floor((p+72)/64),d=h/4,g=8*p,y=new Uint8Array(h);y.set(e),y[p]=128,y[h-4]=g>>>24,y[h-3]=g>>>16&255,y[h-2]=g>>>8&255,y[h-1]=255&g;var v=new Int32Array(d),w=0;for(f=0;f<v.length;f++){var m=y[w++]<<24;m|=y[w++]<<16,m|=y[w++]<<8,m|=y[w++],v[f]=m}for(var b=new Int32Array(64),P=0;P<d;P+=16){for(f=0;f<16;f++)b[f]=v[P+f];for(f=16;f<64;f++){var S=b[f-15],O=S>>>7|S<<25;O^=S>>>18|S<<14,O^=S>>>3;var k=(S=b[f-2])>>>17|S<<15;k^=S>>>19|S<<13,k^=S>>>10,b[f]=b[f-16]+O+b[f-7]+k&4294967295}var E=r,A=t,M=n,_=o,C=s,W=i,j=a,R=c;for(f=0;f<64;f++){k=C>>>6|C<<26,k^=C>>>11|C<<21;var T=R+(k^=C>>>25|C<<7)+(C&W^~C&j)+u[f]+b[f]&4294967295;O=E>>>2|E<<30,O^=E>>>13|E<<19;var x=E&A^E&M^A&M;R=j,j=W,W=C,C=_+T&4294967295,_=M,M=A,E=T+((O^=(A=E)>>>22|E<<10)+x&4294967295)&4294967295}r=r+E&4294967295,t=t+A&4294967295,n=n+M&4294967295,o=o+_&4294967295,s=s+C&4294967295,i=i+W&4294967295,a=a+j&4294967295,c=c+R&4294967295}var D=new Uint8Array(32);for(f=0;f<4;f++)D[f]=r>>>8*(3-f)&255,D[f+4]=t>>>8*(3-f)&255,D[f+8]=n>>>8*(3-f)&255,D[f+12]=o>>>8*(3-f)&255,D[f+16]=s>>>8*(3-f)&255,D[f+20]=i>>>8*(3-f)&255,D[f+24]=a>>>8*(3-f)&255,D[f+28]=c>>>8*(3-f)&255;return D},hash:function(e){for(var r=I.digest(e),t="",n=0;n<r.length;n++){var o="0"+r[n].toString(16);t+=2<o.length?o.substring(1):o}return t}},e=function(e){function t(){return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this))}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&o(e,r)}(t,Polymer.Element),r(t,null,[{key:"is",get:function(){return"airdrop-app"}},{key:"properties",get:function(){return{message:{type:String,value:""},showProgress:{type:Boolean,value:!1},errorMessage:{type:String,value:""},hasClaimedAirdrop:{value:!1,type:Boolean}}}},{key:"observers",get:function(){return[]}}]),r(t,[{key:"ready",value:function(){var r=this;a(s(t.prototype),"ready",this).call(this),this.coreWimp=new Wimp("core",window.parent),this.parentWimp=new Wimp(window.parent),this.parentWimp.ready().then(function(){r.parentWimp.listen("Selected address",function(e){r.selectedAddress={};(r.selectedAddress=e).address;r.coreWimp.ready(function(){})})}),this.coreWimp.ready().then(function(){return r.coreWimp.listen("New block",function(e){r.lastBlock=e})}),Wimp.init()}},{key:"_openClaimDialog",value:function(){this.$.claimDialog.open()}},{key:"_checkCode",value:function(e){for(var r=Math.floor((Date.now()-153576e7)/1e3/60),t=new I.digest(""+r)[0]+"";t.length<3;)t="0"+t;var n=0;t.split("").forEach(function(e){n+=parseInt(e)});var o=(10-n%10)%10+""+t;return console.log(o),e===o}},{key:"_claim",value:function(e){var r=this;if(this.showProgress=!0,this.hasClaimedAirdrop)return this.showProgress=!1,void(this.errorMessage="Sorry, you have already claimed the airdrop.");if(console.log(this.code),!this._checkCode(this.code))return this.showProgress=!1,this.errorMessage="Incorrect code",void console.log(this.errorMessage);this.message="Requesting airdrop info...";var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState){if(console.log("RESPONSESESESSESESS",t),200!=this.status)return r.showProgress=!1,void(r.errorMessage=t.statusText);if(r.message="Checking response","NO"===t.responseText)return r.errorMessage="You have already claimed the airdrop",void(r.showProgress=!1);r.message="Parsing response...";try{JSON.parse(t.responseText);r.showProgress=!1,r.successMessage="Success! ".concat(t.responseText);try{r.set("hasClaimedAirdrop",!0)}catch(e){}r.errorMessage=""}catch(e){r.showProgress=!1,r.errorMessage=e}r.$.claimDialog.refit()}},t.open("GET","http://159.89.132.89:4999/airdrop/".concat(this.selectedAddress.address),!1),t.send()}}]),t}();window.customElements.define(e.is,e)}();
