!function(r){var e={};function n(s){if(e[s])return e[s].exports;var t=e[s]={i:s,l:!1,exports:{}};return r[s].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=r,n.c=e,n.d=function(r,e,s){n.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:s})},n.r=function(r){Object.defineProperty(r,"__esModule",{value:!0})},n.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(e,"a",e),e},n.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},n.p="",n(n.s="./plugins/airdrop/airdrop-app.js")}({"./plugins/airdrop/airdrop-app.js":
/*!****************************************!*\
  !*** ./plugins/airdrop/airdrop-app.js ***!
  \****************************************/
/*! no exports provided */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_qora_deps_sha256_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/qora/deps/sha256.js */ "./src/qora/deps/sha256.js");\n\r\n\r\nclass AirdropApp extends Polymer.Element {\r\n    static get is() {\r\n        return "airdrop-app";\r\n    }\r\n    static get properties() {\r\n        return {\r\n            message: {\r\n                type: String,\r\n                value: ""\r\n            },\r\n            showProgress: {\r\n                type: Boolean,\r\n                value: false\r\n            },\r\n            errorMessage: {\r\n                type: String,\r\n                value: ""\r\n            },\r\n            hasClaimedAirdrop: {\r\n                value: false,\r\n                type: Boolean\r\n            }\r\n        }\r\n    }\r\n    static get observers() {\r\n        return [\r\n\r\n        ]\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    ready() {\r\n        super.ready();\r\n\r\n        this.coreWimp = new Wimp("core", window.parent);\r\n\r\n        this.parentWimp = new Wimp(window.parent);\r\n\r\n        this.parentWimp.ready().then(() => {\r\n            // console.log("==========READYYY")\r\n            this.parentWimp.listen("Selected address", selectedAddress => {\r\n                // console.log(address)\r\n                // this.address = address\r\n                this.selectedAddress = {}\r\n                this.selectedAddress = selectedAddress\r\n                const addr = selectedAddress.address\r\n\r\n                this.coreWimp.ready(() => { })\r\n\r\n            })\r\n        })\r\n\r\n        this.coreWimp.ready().then(() => this.coreWimp.listen("New block", block => {\r\n            // console.log("---- BLOCK ----" ,block)\r\n            this.lastBlock = block;\r\n        }))\r\n\r\n        Wimp.init();\r\n    }\r\n\r\n    _openClaimDialog() {\r\n        this.$.claimDialog.open()\r\n    }\r\n\r\n    _checkCode(code) {\r\n        const hoursFromEpoch = Math.floor((Date.now() - 1535760000000) / 1000 / 60 / 60)\r\n\r\n        const hash = new _src_qora_deps_sha256_js__WEBPACK_IMPORTED_MODULE_0__["default"].digest("" + hoursFromEpoch)\r\n        // const hash = new Sha256.digest("" + 363)\r\n        let lastNumbers = hash[0] + ""\r\n        while(lastNumbers.length < 3) lastNumbers = "0" + lastNumbers\r\n        \r\n        let total = 0;\r\n        lastNumbers.split("").forEach(char => {\r\n            total = total + parseInt(char)\r\n        })\r\n        const firstNumber = (10 - (total % 10)) % 10\r\n        const finalNumber = firstNumber + "" + lastNumbers\r\n        console.log(finalNumber)\r\n        return code === finalNumber\r\n    }\r\n\r\n    _claim(e) {\r\n        const _this = this\r\n        this.showProgress = true\r\n        if (this.hasClaimedAirdrop) {\r\n            this.showProgress = false;\r\n            this.errorMessage = "Sorry, you have already claimed the airdrop."\r\n            return\r\n        }\r\n\r\n        console.log(this.code)\r\n        if (!this._checkCode(this.code)) {\r\n            this.showProgress = false;\r\n            this.errorMessage = "Incorrect code"\r\n            console.log(this.errorMessage)\r\n            return\r\n        }\r\n        \r\n        this.message = "Requesting airdrop info..."\r\n\r\n        var xhttp = new XMLHttpRequest()\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState == 4) {\r\n                // Typical action to be performed when the document is ready:\r\n                // document.getElementById("demo").innerHTML = xhttp.responseText\r\n                console.log("RESPONSESESESSESESS", xhttp)\r\n                if (!(this.status == 200)){\r\n                    _this.showProgress = false\r\n                    _this.errorMessage = xhttp.statusText\r\n                    return\r\n                }\r\n                _this.message = "Checking response"\r\n                if (xhttp.responseText === "NO") {\r\n                    _this.errorMessage = "You have already claimed the airdrop"\r\n                    _this.showProgress = false\r\n                    return\r\n                }\r\n                _this.message = "Parsing response..."\r\n                try {\r\n                    const response = JSON.parse(xhttp.responseText)\r\n                    _this.showProgress = false;\r\n                    _this.successMessage = `Success! ${xhttp.responseText}`\r\n                    _this.set("hasClaimedAirdrop", true)\r\n                    _this.$.claimDialog.refit()\r\n                }\r\n                catch (e) {\r\n                    _this.showProgress = false\r\n                    _this.errorMessage = e\r\n                }\r\n                _this.errorMessage = ""\r\n            }\r\n        };\r\n        xhttp.open("GET", `http://159.89.132.89:4999/airdrop/${this.selectedAddress.address}`, true);\r\n        xhttp.send();\r\n    }\r\n}\r\n\r\nwindow.customElements.define(AirdropApp.is, AirdropApp)\n\n//# sourceURL=webpack:///./plugins/airdrop/airdrop-app.js?')},"./src/qora/deps/sha256.js":
/*!*********************************!*\
  !*** ./src/qora/deps/sha256.js ***!
  \*********************************/
/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n// SHA-256 hash function. Copyright-free.\n// Requires typed arrays.\nconst SHA256 = {};\n\nSHA256.K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, \n    0x59f111f1, 0x923f82a4, 0xab1c5ed5, 0xd807aa98, 0x12835b01, \n    0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, \n    0xc19bf174, 0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, \n    0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da, 0x983e5152, \n    0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, \n    0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, \n    0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, \n    0xd6990624, 0xf40e3585, 0x106aa070, 0x19a4c116, 0x1e376c08, \n    0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, \n    0x682e6ff3, 0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, \n    0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n];\n\n// The digest function returns the hash value (digest)\n// as a 32 byte (typed) array.\n// message: the string or byte array to hash\nSHA256.digest = function(message) {\n    var h0 = 0x6a09e667;\n    var h1 = 0xbb67ae85;\n    var h2 = 0x3c6ef372;\n    var h3 = 0xa54ff53a;\n    var h4 = 0x510e527f;\n    var h5 = 0x9b05688c;\n    var h6 = 0x1f83d9ab;\n    var h7 = 0x5be0cd19;\n    var K = SHA256.K;\n    if (typeof message == 'string') {\n       var s =  unescape(encodeURIComponent(message)); // UTF-8\n        message = new Uint8Array(s.length);\n        for (var i = 0; i < s.length; i++) {\n            message[i] = s.charCodeAt(i) & 0xff;\n        }\n    }\n    var length = message.length;\n    var byteLength = Math.floor((length + 72) / 64) * 64;\n    var wordLength = byteLength / 4;\n    var bitLength = length * 8;\n    var m = new Uint8Array(byteLength);\n    m.set(message);\n    m[length] = 0x80;\n    m[byteLength - 4] = bitLength >>> 24;\n    m[byteLength - 3] = (bitLength >>> 16) & 0xff;\n    m[byteLength - 2] = (bitLength >>> 8) & 0xff;\n    m[byteLength - 1] = bitLength & 0xff;\n    var words = new Int32Array(wordLength);\n    var byteIndex = 0;\n    for (var i = 0; i < words.length; i++) {\n        var word = m[byteIndex++] << 24;\n        word |= m[byteIndex++] << 16;\n        word |= m[byteIndex++] << 8;\n        word |= m[byteIndex++];\n        words[i] = word; \n    }\n    var w = new Int32Array(64);\n    for (var j = 0; j < wordLength; j += 16) {\n        for (i = 0; i < 16; i++) {\n            w[i] = words[j + i];\n        }\n        for (i = 16; i < 64; i++) {\n            var v = w[i - 15];\n            var s0 = (v >>> 7) | (v << 25);\n            s0 ^= (v >>> 18) | (v << 14);\n            s0 ^= (v >>> 3);\n            v = w[i - 2];\n            var s1 = (v >>> 17) | (v << 15);\n            s1 ^= (v >>> 19) | (v << 13);\n            s1 ^= (v >>> 10);\n            w[i] = (w[i - 16] + s0 + w[i - 7] + s1) & 0xffffffff; \n        }\n        var a = h0;\n        var b = h1;\n        var c = h2;\n        var d = h3;\n        var e = h4;\n        var f = h5;\n        var g = h6;\n        var h = h7;\n        for (i = 0; i < 64; i++) {\n            s1 = (e >>> 6) | (e << 26);\n            s1 ^= (e >>> 11) | (e << 21);\n            s1 ^= (e >>> 25) | (e << 7);\n            var ch = (e & f) ^ (~e & g);\n            var temp1 = (h + s1 + ch + K[i] + w[i]) & 0xffffffff;\n            s0 = (a >>> 2) | (a << 30);\n            s0 ^= (a >>> 13) | (a << 19);\n            s0 ^= (a >>> 22) | (a << 10);\n            var maj = (a & b) ^ (a & c) ^ (b & c);\n            var temp2 = (s0 + maj) & 0xffffffff;\n            h = g\n            g = f\n            f = e\n            e = (d + temp1) & 0xffffffff;\n            d = c;\n            c = b;\n            b = a;\n            a = (temp1 + temp2) & 0xffffffff;\n        }\n        h0 = (h0 + a) & 0xffffffff;\n        h1 = (h1 + b) & 0xffffffff;\n        h2 = (h2 + c) & 0xffffffff;\n        h3 = (h3 + d) & 0xffffffff;\n        h4 = (h4 + e) & 0xffffffff;\n        h5 = (h5 + f) & 0xffffffff;\n        h6 = (h6 + g) & 0xffffffff;\n        h7 = (h7 + h) & 0xffffffff;\n    }\n    var hash = new Uint8Array(32);\n    for (var i = 0; i < 4; i++) {\n        hash[i] = (h0 >>> (8 * (3 - i))) & 0xff;\n        hash[i + 4] = (h1 >>> (8 * (3 - i))) & 0xff;\n        hash[i + 8] = (h2 >>> (8 * (3 - i))) & 0xff;\n        hash[i + 12] = (h3 >>> (8 * (3 - i))) & 0xff;\n        hash[i + 16] = (h4 >>> (8 * (3 - i))) & 0xff;\n        hash[i + 20] = (h5 >>> (8 * (3 - i))) & 0xff;\n        hash[i + 24] = (h6 >>> (8 * (3 - i))) & 0xff;\n        hash[i + 28] = (h7 >>> (8 * (3 - i))) & 0xff;\n    }\n    return hash;\n}    \n\n// The hash function returns the hash value as a hex string.\n// message: the string or byte array to hash\nSHA256.hash = function(message) {\n    var digest = SHA256.digest(message);\n    var hex = '';\n\tfor (var i = 0; i < digest.length; i++) {\n\t\tvar s = '0' + digest[i].toString(16);\n        hex += s.length > 2 ? s.substring(1) : s;\n\t}\n    return hex;\n}\n\n\n// == Convert to ES6 Module == //\n/* harmony default export */ __webpack_exports__[\"default\"] = (SHA256);\n\n//# sourceURL=webpack:///./src/qora/deps/sha256.js?")}});