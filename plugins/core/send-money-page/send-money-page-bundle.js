!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=174)}({173:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var s=e[r];"."===s?e.splice(r,1):".."===s?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return r.exec(e).slice(1)};function a(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,r="/"===i.charAt(0))}return t=n(a(t.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),s="/"===i(e,-1);return(e=n(a(e.split("/"),function(e){return!!e}),!r).join("/"))||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(a(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var s=r(e.split("/")),a=r(n.split("/")),i=Math.min(s.length,a.length),o=i,l=0;l<i;l++)if(s[l]!==a[l]){o=l;break}var u=[];for(l=o;l<s.length;l++)u.push("..");return(u=u.concat(a.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=s(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=s(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return s(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(8))},174:function(e,t,n){"use strict";n.r(t);var r=n(9);n(173);class s extends Polymer.Element{static get is(){return"send-money-page"}static get properties(){return{addresses:{type:Array,value:[]},amount:{type:Number},errorMessage:{type:String,value:""},sendMoneyLoading:{type:Boolean,value:!1},data:{type:Object,value:{}},addressesInfo:{type:Object,value:{}},selectedAddress:{type:Object,value:{}},selectedAddressInfo:{type:Object,value:{},computed:"_getSelectedAddressInfo(addressesInfo, selectedAddress)"},addressesUnconfirmedTransactions:{type:Object,value:{}},addressInfoStreams:{type:Object,value:{}},unconfirmedTransactionStreams:{type:Object,value:{}},maxWidth:{type:String,value:"600"}}}static get observers(){return["_usdKeyUp(usdAmount)","_kmxKeyUp(amount)"]}constructor(){super()}_floor(e){return Math.floor(e)}_checkAmount(){this.validAmount=this.amount>=this.selectedAddressInfo.nativeBalance.total[0]}textColor(e){return"light"==e?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.87)"}async _sendMoney(e){const t=this.amount*Math.pow(10,8);let n=this.recipient;this.sendMoneyLoading=!0,console.log(this.selectedAddress);let s=await this.parentWimp.request("qoraApiCall",{data:{type:"api",url:`addresses/lastreference/${this.selectedAddress.address}/unconfirmed`}});s=s.data;let a=await this.parentWimp.request("qoraApiCall",{data:{type:"api",url:`names/${n}`}}).catch(e=>JSON.stringify({}));console.log(a),a.success&&(n=(a=JSON.parse(a.data)).value),this.parentWimp.request("createTransaction",{data:{type:2,nonce:this.selectedAddress.nonce,params:{recipient:n,amount:t,lastReference:s}}}).then(e=>{const t=JSON.parse(e.data);if(console.log("Yay: ",e),!t.reference)throw`Error! ${r.b[t]}. Error code ${t}`;this.errorMessage="",this.recipient="",this.amount="",this.successMessage="Success! "+e.data}).catch(e=>{console.log(e),this.errorMessage=e})}_usdKeyUp(){this.amount=this.usdAmount/this.BTCUSD}_kmxKeyUp(){this.usdAmount=this.amount*this.BTCUSD}updateBTCPrice(){this._getBTCPrice().then(e=>{console.log(e),this.BTCUSD=e.USD.last},e=>{})}_getBTCPrice(){return new Promise((e,t)=>{var n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&(console.log("RESPONSESESESSESESS",n),200!=this.status&&t(),e(JSON.parse(n.responseText)))},n.open("GET","https://blockchain.info/ticker",!0),n.send()})}_getSelectedAddressInfo(e,t){return this.addressesInfo[t.address]}kmxToUSD(e,t){return e*t}ready(){super.ready(),this.coreWimp=new Wimp("core",window.parent),this.parentWimp=new Wimp(window.parent),this.parentWimp.ready(()=>{this.parentWimp.listen("Selected address",e=>{console.log(e),this.selectedAddress={},this.selectedAddress=e;const t=e.address;this.coreWimp.ready(()=>{this.addressInfoStreams[t]||(this.addressInfoStreams[t]=this.coreWimp.listen(`address/${t}`,e=>{console.log("Send money page received",e),e.nativeBalance=e.nativeBalance||{total:{}},e.nativeBalance.total[0]=e.nativeBalance.total[0]||0,this.set(`addressesInfo.${t}`,e);const n=this.addressesInfo;this.addressesInfo={},this.addressesInfo=n})),this.unconfirmedTransactionStreams[t]||(this.unconfirmedTransactionStreams[t]=this.coreWimp.listen(`unconfirmedOfAddress/${t}`,e=>{this.addressesUnconfirmedTransactions[t]=e}))})})}),this.updateBTCPrice(),setInterval(()=>this.updateBTCPrice(),1e4),Wimp.init()}}window.customElements.define(s.is,s)},8:function(e,t){var n,r,s=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var l,u=[],c=!1,d=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&p())}function p(){if(!c){var e=o(f);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||c||o(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},9:function(e,t,n){"use strict";n.d(t,"h",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"e",function(){return a}),n.d(t,"d",function(){return i}),n.d(t,"g",function(){return l}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"f",function(){return u});const r={1:"Genesis",2:"Payment",3:"Name registration",4:"Name update",5:"Sell name",6:"Cancel sell name",7:"Buy name",8:"Create poll",9:"Vote in poll",10:"Arbitrary",11:"Issue asset",12:"Transfer asset",13:"Create asset order",14:"Cancel asset order",15:"Multi-payment transaction",16:"Deploy AT",17:"Message",18:"Delegation",19:"Supernode",20:"Airdrop"},s={1:"Valid OK",2:"Invalid address",3:"Negative amount",4:"Nagative fee",5:"No balance",6:"Invalid reference",7:"Invalid time length",8:"Invalid value length",9:"Name already registered",10:"Name does not exist",11:"Invalid name owner",12:"Name already for sale",13:"Name not for sale",14:"Name buyer already owner",15:"Invalid amount",16:"Invalid seller",17:"Name not lowercase",18:"Invalid description length",19:"Invalid options length",20:"Invalid option length",21:"Duplicate option",22:"Poll already created",23:"Poll already has votes",24:"Poll does not exist",25:"Option does not exist",26:"Already voted for that option",27:"Invalid data length",28:"Invalid quantity",29:"Asset does not exist",30:"Invalid return",31:"Have equals want",32:"Order does not exist",33:"Invalid order creator",34:"Invalid payments length",35:"Negative price",36:"Invalid creation bytes",37:"Invalid tags length",38:"Invalid type length",40:"Fee less required",41:"Invalid raw data",42:"Delegation already exists",43:"Supernode invalid",44:"Super node already exists",45:"Spending disallowed",10000:"AT_ERROR",1000:"Not yet released.."},a=1e8,i="/proxy/",o=46,l=new Uint8Array([54,190,201,206,65,29,123,129,147,231,180,166,171,45,95,165,78,200,208,194,44,207,221,146,45,238,68,68,69,102,62,6]),u="$2a$10$IxVE941tXVUD4cW0TNVm.O",c=16}});